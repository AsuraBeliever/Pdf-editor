<!DOCTYPE html>
<html lang="en-EN">
<head>
    <meta charset="UTF-8">
    <title>PDFPILOT</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
</head>
<body>

    <!-- Título que lleva al menú -->
    <a href="index.html" class="titulo1" title="Volver al menú">PDFPilot</a>

    <!-- Contenedor lateral de herramientas -->
    <div class="opccontenedor">
        <div class="opcionarchivo">
            <img src="guardar-icono.png" alt="Guardar" />
            Guardar archivo
        </div>
        <div class="opcionarchivo">
            <img src="texto-icono.png" alt="Texto" />
            Agregar texto
        </div>
        <div class="opcionarchivo">
            <img src="resaltar-icono.png" alt="Resaltar" />
            Resaltar
        </div>
        <div class="opcionarchivo">
            <img src="lapiz-icono.png" alt="Dibujar" />
            Dibujar
        </div>
        <div class="opcionarchivo">
            <img src="borrar-icono.png" alt="Borrar" />
            Eliminar elemento
        </div>
        <div class="opcionarchivo">
            <img src="archivo-icono.png" alt="Subir PDF" />
            Cargar nuevo PDF
        </div>
    </div>

    <!-- Lienzo donde se mostrará el PDF -->
    <canvas id="pdfCanvas" style="margin-left: 220px; border: 1px solid black;"></canvas>

    <script>
    const canvas = document.getElementById("pdfCanvas");
    const ctx = canvas.getContext("2d");
    const pdfURL = sessionStorage.getItem("pdfToEdit");

    if (!pdfURL) {
        alert("No se encontró ningún archivo PDF. Regresa al menú para cargar uno.");
        window.location.href = "index.html";
    } else {
        pdfjsLib.getDocument(pdfURL).promise.then(pdf => {
            console.log("PDF cargado. Total de páginas: " + pdf.numPages);
            // Carga la primera página
            return pdf.getPage(1);
        }).then(page => {
            const scale = 1.5;
            const viewport = page.getViewport({ scale });

            // Ajusta el tamaño del canvas
            canvas.width = viewport.width;
            canvas.height = viewport.height;

            const renderContext = {
                canvasContext: ctx,
                viewport: viewport
            };

            return page.render(renderContext).promise;
        }).catch(error => {
            console.error("Error al renderizar el PDF:", error);
            alert("Ocurrió un error al mostrar el PDF.");
        });
    }
</script>

    

</body>
</html>
